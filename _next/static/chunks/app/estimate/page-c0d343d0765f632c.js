(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6077],{6539:(e,t,s)=>{Promise.resolve().then(s.bind(s,1552))},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},1552:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(5155),l=s(2115),a=s(6046),n=s(1923),i=s(9812),d=s(8897),o=s(3740),c=s(112),x=s(6221);let m=["商品選択","オプション・数量","見積もり結果"];function h(){let e=(0,a.useRouter)(),t=(0,l.useRef)(null),[s,h]=(0,l.useState)(1),[u,p]=(0,l.useState)(null),[b,f]=(0,l.useState)(null),[j,y]=(0,l.useState)({}),[N,g]=(0,l.useState)(100);(0,l.useEffect)(()=>{var e;null===(e=t.current)||void 0===e||e.focus({preventScroll:!1})},[s]);let v=(0,l.useMemo)(()=>u?(0,i.ab)(u):[],[u]),w=(0,l.useMemo)(()=>b?(0,i.yi)(b,j,N):null,[b,j,N]),k=e=>{p(e),f(null),y({})},C=e=>{f(e);let t={};for(let s of e.options)t[s.id]=s.choices[0].id;y(t),h(2)},P=(e,t)=>{y(s=>({...s,[e]:t}))},S=()=>{h(1),p(null),f(null),y({}),g(100)},R=n.R6.find(e=>e.id===u);return(0,r.jsx)("div",{className:"min-h-screen py-12 sm:py-16",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-10",children:[(0,r.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-text mb-3",children:"オンライン見積もり"}),(0,r.jsx)("p",{className:"text-text-secondary text-lg",children:"商品・オプションを選ぶだけで、すぐに概算価格をご確認いただけます。"})]}),(0,r.jsx)(d.S,{steps:m,currentStep:s,onStepClick:e=>{1===e?S():2===e&&b?h(2):3===e&&b&&w&&h(3)}}),1===s&&(0,r.jsxs)("div",{className:"space-y-8",ref:t,tabIndex:-1,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-text mb-4",id:"category-heading",children:"カテゴリを選択"}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",role:"group","aria-labelledby":"category-heading",children:n.R6.map(e=>(0,r.jsxs)("button",{onClick:()=>k(e.id),className:"p-4 rounded-xl border-2 text-left transition-all hover:-translate-y-0.5 min-h-[44px] ".concat(u===e.id?"border-current shadow-lg":"border-border hover:border-current hover:shadow-md bg-white"),style:{borderColor:u===e.id?e.color:void 0,color:e.color},"aria-pressed":u===e.id,children:[(0,r.jsx)("span",{className:"text-2xl mb-2 block","aria-hidden":"true",children:e.icon}),(0,r.jsx)("span",{className:"text-sm font-bold text-text block",children:e.name})]},e.id))})]}),u&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-text mb-4",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:null==R?void 0:R.color},"aria-hidden":"true"}),null==R?void 0:R.name,"の商品を選択"]}),0===v.length?(0,r.jsx)("p",{className:"text-text-secondary bg-surface p-6 rounded-xl text-center",children:"このカテゴリの商品は準備中です。"}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:v.map(e=>{let t=e.basePrices[0];return(0,r.jsxs)("button",{onClick:()=>C(e),className:"bg-white p-5 rounded-xl border-2 border-border text-left hover:border-primary hover:shadow-lg transition-all hover:-translate-y-0.5 group min-h-[44px]",children:[(0,r.jsx)("h3",{className:"font-bold text-text group-hover:text-primary transition-colors",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:[e.options.map(e=>e.label).join(" / ")," 選択可"]}),(0,r.jsxs)("p",{className:"mt-3 font-price font-bold text-secondary text-lg",children:[(0,i.$g)(t.unitPrice),"〜",(0,r.jsxs)("span",{className:"text-xs text-text-secondary font-normal ml-1",children:["/ 個（",t.quantity,"個〜）"]})]})]},e.id)})})]})]}),2===s&&b&&(0,r.jsxs)("div",{className:"space-y-8",ref:t,tabIndex:-1,children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-text-secondary",children:[null==R?void 0:R.icon," ",null==R?void 0:R.name]}),(0,r.jsx)("h2",{className:"text-xl font-bold text-text",children:b.name})]}),(0,r.jsx)("button",{onClick:()=>h(1),className:"text-sm text-primary hover:underline",children:"商品を変更"})]}),b.options.map(e=>{var t;return(0,r.jsx)(o.Z,{group:e,selectedId:null!==(t=j[e.id])&&void 0!==t?t:e.choices[0].id,onChange:t=>P(e.id,t)},e.id)}),(0,r.jsx)(c.R,{selected:N,onChange:g}),w&&(0,r.jsx)(x._,{result:w,quantity:N})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>h(1),className:"px-6 py-3 border-2 border-border text-text rounded-xl font-medium hover:bg-surface transition-colors min-h-[44px]",children:"戻る"}),(0,r.jsx)("button",{onClick:()=>h(3),className:"flex-1 px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary-dark transition-colors shadow-sm hover:-translate-y-0.5 min-h-[44px]",children:"見積もり結果を確認"})]})]}),3===s&&b&&w&&(0,r.jsxs)("div",{className:"space-y-6",ref:t,tabIndex:-1,children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 sm:p-8 shadow-sm border border-border",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-text mb-6 pb-4 border-b border-border",children:"お見積もり内容"}),(0,r.jsxs)("dl",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between py-2",children:[(0,r.jsx)("dt",{className:"text-text-secondary",children:"カテゴリ"}),(0,r.jsxs)("dd",{className:"font-medium text-text",children:[null==R?void 0:R.icon," ",null==R?void 0:R.name]})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2",children:[(0,r.jsx)("dt",{className:"text-text-secondary",children:"商品"}),(0,r.jsx)("dd",{className:"font-medium text-text",children:b.name})]}),b.options.map(e=>{let t=e.choices.find(t=>t.id===j[e.id]);return(0,r.jsxs)("div",{className:"flex justify-between py-2",children:[(0,r.jsx)("dt",{className:"text-text-secondary",children:e.label}),(0,r.jsx)("dd",{className:"font-medium text-text",children:null==t?void 0:t.label})]},e.id)}),(0,r.jsxs)("div",{className:"flex justify-between py-2",children:[(0,r.jsx)("dt",{className:"text-text-secondary",children:"数量"}),(0,r.jsxs)("dd",{className:"font-medium text-text",children:[N.toLocaleString(),"個"]})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2",children:[(0,r.jsx)("dt",{className:"text-text-secondary",children:"単価"}),(0,r.jsx)("dd",{className:"font-price font-bold text-text",children:(0,i.$g)(w.unitPrice)})]}),(0,r.jsxs)("div",{className:"flex justify-between py-3 border-t-2 border-primary/20 mt-2",children:[(0,r.jsx)("dt",{className:"text-lg font-bold text-text",children:"合計金額（税抜）"}),(0,r.jsx)("dd",{className:"font-price text-2xl font-bold text-primary",children:(0,i.$g)(w.totalPrice)})]}),(0,r.jsxs)("div",{className:"flex justify-between py-1",children:[(0,r.jsx)("dt",{className:"text-sm text-text-secondary",children:"税込参考価格"}),(0,r.jsx)("dd",{className:"font-price text-sm text-text-secondary",children:(0,i.$g)(Math.round(1.1*w.totalPrice))})]})]}),(0,r.jsx)("p",{className:"mt-6 text-xs text-text-secondary bg-surface p-3 rounded-lg",children:"※ 上記は概算見積もりです。デザイン内容・加工仕様により変動する場合があります。正式なお見積もりはご注文後にご連絡いたします。"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,r.jsx)("button",{onClick:()=>h(2),className:"px-6 py-3 border-2 border-border text-text rounded-xl font-medium hover:bg-surface transition-colors min-h-[44px]",children:"内容を変更"}),(0,r.jsx)("button",{onClick:()=>window.print(),className:"px-6 py-3 border-2 border-primary text-primary rounded-xl font-medium hover:bg-primary/5 transition-colors min-h-[44px]",children:"\uD83D\uDCC4 PDF出力"}),(0,r.jsx)("button",{onClick:()=>{if(!b)return;let t=(0,i.a0)({productId:b.id,selectedOptions:j,quantity:N});e.push("/order?".concat(t))},className:"flex-1 px-6 py-3 bg-secondary text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition-all shadow-md hover:-translate-y-0.5 min-h-[44px]",children:"この内容で注文する →"})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:S,className:"text-sm text-primary hover:underline",children:"最初からやり直す"})})]})]})})}},3740:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(5155);function l(e){let{group:t,selectedId:s,onChange:l}=e;return(0,r.jsxs)("fieldset",{className:"mb-6",children:[(0,r.jsx)("legend",{className:"block text-sm font-bold text-text mb-2",children:t.label}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-label":t.label,children:t.choices.map(e=>{let t=s===e.id;return(0,r.jsxs)("button",{onClick:()=>l(e.id),role:"radio","aria-checked":t,className:"px-4 py-2.5 rounded-lg text-sm font-medium border-2 transition-all min-h-[44px] ".concat(t?"border-primary bg-primary/5 text-primary":"border-border bg-white text-text hover:border-primary/40"),children:[e.label,1!==e.priceModifier&&(0,r.jsxs)("span",{className:"ml-1 text-xs text-text-secondary",children:["(",e.priceModifier>1?"+":"",Math.round((e.priceModifier-1)*100),"%)"]})]},e.id)})})]})}},6221:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var r=s(5155),l=s(9812);function a(e){let{result:t,quantity:s,compact:a=!1}=e;return a?(0,r.jsxs)("div",{className:"bg-primary/5 rounded-xl p-4",children:[(0,r.jsx)("p",{className:"text-sm text-text-secondary",children:"概算金額"}),(0,r.jsx)("p",{className:"font-price text-2xl font-bold text-primary",children:(0,l.$g)(t.totalPrice)}),(0,r.jsxs)("p",{className:"text-sm text-text-secondary",children:["単価 ",(0,l.$g)(t.unitPrice)," \xd7 ",s.toLocaleString(),"個"]})]}):(0,r.jsx)("div",{className:"bg-gradient-to-r from-primary/5 to-secondary/5 rounded-xl p-5 border border-primary/10",children:(0,r.jsxs)("div",{className:"flex items-end justify-between flex-wrap gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-text-secondary mb-1",children:"概算見積もり金額"}),(0,r.jsx)("p",{className:"font-price text-3xl font-bold text-primary","aria-live":"polite",children:(0,l.$g)(t.totalPrice)}),(0,r.jsxs)("p",{className:"text-sm text-text-secondary mt-1",children:["単価 ",(0,l.$g)(t.unitPrice)," \xd7 ",s.toLocaleString(),"個"]})]}),t.discountRate>0&&(0,r.jsxs)("span",{className:"bg-danger text-white text-sm font-bold px-3 py-1 rounded-full",children:[t.discountRate,"% OFF"]})]})})}},112:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});var r=s(5155),l=s(9812);function a(e){let{selected:t,onChange:s}=e;return(0,r.jsxs)("fieldset",{className:"mb-6",children:[(0,r.jsx)("legend",{className:"block text-sm font-bold text-text mb-2",children:"数量"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-label":"数量",children:l.VG.map(e=>(0,r.jsxs)("button",{onClick:()=>s(e),role:"radio","aria-checked":t===e,className:"px-4 py-2.5 rounded-lg text-sm font-medium border-2 transition-all min-h-[44px] ".concat(t===e?"border-primary bg-primary/5 text-primary":"border-border bg-white text-text hover:border-primary/40"),children:[e.toLocaleString(),"個"]},e))})]})}},8897:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});var r=s(5155);function l(e){let{steps:t,currentStep:s,onStepClick:l}=e;return(0,r.jsx)("nav",{"aria-label":"進行状況",className:"flex items-center justify-center mb-12",children:(0,r.jsx)("ol",{className:"flex items-center",role:"list",children:t.map((e,t)=>{let a=t+1,n=s>=a,i=s===a;return(0,r.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,r.jsx)("div",{className:"w-8 sm:w-16 h-0.5 ".concat(n?"bg-primary":"bg-border"," transition-colors"),"aria-hidden":"true"}),(0,r.jsxs)("button",{onClick:()=>null==l?void 0:l(a),"aria-current":i?"step":void 0,"aria-label":"ステップ".concat(a,": ").concat(e).concat(i?"（現在）":""),className:"flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-all ".concat(i?"bg-primary text-white shadow-md":n?"bg-primary/10 text-primary":"bg-surface text-text-secondary"),children:[(0,r.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(i?"bg-white text-primary":n?"bg-primary text-white":"bg-border text-text-secondary"),"aria-hidden":"true",children:n&&!i?"✓":a}),(0,r.jsx)("span",{className:"hidden sm:inline",children:e})]})]},e)})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1506,8441,1517,7358],()=>t(6539)),_N_E=e.O()}]);